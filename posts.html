<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Danh sách bài viết Ngọc Rồng Online – TDStudio</title>
    <link rel="canonical" href="https://thanhdi.com/posts" />
    <meta name="description" content="Danh sách bài viết Ngọc Rồng Online của TDStudio, tổng hợp nội dung đã đăng trên Fanpage, hỗ trợ phân trang theo từng nhóm bài.">
    <meta name="robots" content="index, follow">
    <style>
      :root{
        --bg:#f9fafb;
        --card-bg:#ffffff;
        --text:#111827;
        --muted:#6b7280;
        --accent:#111827;
        --accent2:#facc15;
        --accent3:#dc2626;
        --radius:12px;
        --avatar-size:54px;
        --title-size:15px;
        --subtitle-size:12px;
      }

      *{box-sizing:border-box; margin:0; padding:0;}

      body{
        margin:16px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
        background:var(--bg);
        color:var(--text);
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
      }

      .container{
        max-width:980px;
        margin:0 auto;
      }

      /* ===== TITLE EFFECT (BLACK - YELLOW - RED) ===== */
      .page-header{
        display:flex;
        align-items:baseline;
        justify-content:space-between;
        gap:12px;
        margin-bottom:12px;
        flex-wrap:wrap;
      }

      .page-title{
        font-size:20px;
        font-weight:800;
        background:linear-gradient(
          90deg,
          var(--accent),
          var(--accent2),
          var(--accent3),
          var(--accent2),
          var(--accent)
        );
        background-size:300% 100%;
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
        animation:titleFlow 4s linear infinite;
      }

      .meta-info{
        font-size:13px;
        font-weight:600;
        background:linear-gradient(
          90deg,
          var(--accent),
          var(--accent2),
          var(--accent3),
          var(--accent2),
          var(--accent)
        );
        background-size:300% 100%;
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
        animation:titleFlow 5s linear infinite;
        text-align:right;
      }

      @keyframes titleFlow{
        0%   { background-position: 0% 50%; }
        100% { background-position: 300% 50%; }
      }

      /* ===== LIST ===== */
      .post-list{
        display:flex;
        flex-direction:column;
        gap:8px;
      }

      .post-card{
        display:flex;
        gap:10px;
        align-items:center;
        text-decoration:none;
        color:inherit;
        border-radius:var(--radius);
        padding:1px; /* viền gradient */
        border:2px solid transparent;
        background:
          linear-gradient(var(--card-bg), var(--card-bg)) padding-box,
          linear-gradient(
            120deg,
            var(--accent),
            var(--accent2),
            var(--accent3),
            var(--accent2),
            var(--accent)
          ) border-box;
        background-size:220% 220%;
        animation:borderFlow 6s linear infinite;
        box-shadow:0 4px 12px rgba(15,23,42,0.08);
        transition:
          transform .12s ease,
          box-shadow .12s ease;
      }

      .post-card-inner{
        display:flex;
        gap:10px;
        align-items:center;
        border-radius:calc(var(--radius) - 2px);
        background:var(--card-bg);
        padding:7px 8px;
        width:100%;
      }

      .post-card:hover{
        transform:translateY(-1px);
        box-shadow:0 8px 20px rgba(15,23,42,0.16);
      }

      @keyframes borderFlow{
        0%   { background-position: 0% 50%; }
        100% { background-position: 220% 50%; }
      }

      .post-avatar{
        width:var(--avatar-size);
        height:var(--avatar-size);
        min-width:var(--avatar-size);
        border-radius:8px;
        overflow:hidden;
        background:#e5e7eb;
        flex-shrink:0;
      }
      .post-avatar img{
        width:100%;
        height:100%;
        object-fit:cover;
        display:block;
      }

      .post-body{
        flex:1;
        display:flex;
        flex-direction:column;
        gap:3px;
        justify-content:center;
        min-width:0;
      }

      .post-title{
        margin:0;
        font-size:var(--title-size);
        font-weight:800;
        line-height:1.2;
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
      }

      .post-sub{
        margin:0;
        font-size:var(--subtitle-size);
        color:var(--muted);
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
      }

      /* ===== PAGINATION ===== */
      .pager{
        display:flex;
        gap:6px;
        align-items:center;
        justify-content:center;
        margin-top:14px;
        flex-wrap:wrap;
      }

      .pager button{
        padding:6px 10px;
        border-radius:999px;
        border:1px solid #e5e7eb;
        background:#ffffff;
        cursor:pointer;
        font-weight:700;
        font-size:13px;
      }

      .pager button[disabled]{
        opacity:0.45;
        cursor:not-allowed;
      }

      .pager .page-num{
        min-width:36px;
      }

      .pager .page-num.active{
        background:linear-gradient(
          90deg,
          var(--accent),
          var(--accent2),
          var(--accent3)
        );
        color:white;
        border-color:transparent;
      }

      .center{
        text-align:center;
        padding:18px 6px;
        color:var(--muted);
        font-weight:700;
        font-size:13px;
      }

      /* responsive */
      @media(max-width:640px){
        :root{
          --avatar-size:44px;
          --title-size:14px;
          --subtitle-size:11px;
        }
        body{
          margin:10px;
        }
        .container{
          margin:0;
        }
        .post-title,
        .post-sub{
          white-space:normal;
        }
      }
    </style>
  </head>
  <body>
    <div class="container" role="main">
      <header class="page-header">
        <h1 class="page-title">Danh sách bài viết</h1>
        <div class="meta-info" id="summaryInfo">—</div>
      </header>

      <div id="postList" class="post-list" aria-live="polite"
        aria-busy="false"></div>

      <div id="pager" class="pager"
        aria-label="Phân trang bài viết"></div>

      <div id="msg" class="center" style="display:none;"></div>
    </div>

    <script>
/*
  posts.html
  - Lấy dữ liệu từ posts.json (cùng thư mục).
  - Phân trang client: PAGE_SIZE = 20.
  - Nếu fetch lỗi, dùng fallback demo (để bạn test).
  - Bạn chỉ cần tạo posts.json theo format trong ví dụ.
*/

/* ===== CẤU HÌNH ===== */
const JSON_PATH = 'posts.json'; // đổi nếu đặt ở nơi khác
const PAGE_SIZE = 20;

/* ===== DOM ===== */
const root = document.getElementById('postList');
const pagerEl = document.getElementById('pager');
const summaryInfo = document.getElementById('summaryInfo');
const msgEl = document.getElementById('msg');

let posts = [];
let currentPage = 1;

/* ===== HELPERS ===== */
function showMessage(text){
  msgEl.style.display = 'block';
  msgEl.textContent = text;
}
function hideMessage(){
  msgEl.style.display = 'none';
  msgEl.textContent = '';
}
function setBusy(isBusy){
  root.setAttribute('aria-busy', String(Boolean(isBusy)));
}

/* ===== RENDER ===== */
function renderPage(page){
  if(!Array.isArray(posts)) posts = [];
  const total = Math.max(0, posts.length);
  const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
  currentPage = Math.max(1, Math.min(page, totalPages));

  // slice items
  const start = (currentPage - 1) * PAGE_SIZE;
  const end = start + PAGE_SIZE;
  const pageItems = posts.slice(start, end);

  // render list
  root.innerHTML = '';
  if(pageItems.length === 0){
    root.innerHTML = '<div class="center">Không có bài viết để hiển thị.</div>';
  } else {
    for(const p of pageItems){
      const a = document.createElement('a');
      a.className = 'post-card';
      a.href = p.link || '#';
      a.target = '_blank';
      a.rel = 'noopener noreferrer';

      const inner = document.createElement('div');
      inner.className = 'post-card-inner';

      const av = document.createElement('div');
      av.className = 'post-avatar';
      const img = document.createElement('img');
      img.src = p.avatar || 'https://via.placeholder.com/150.png?text=Avatar';
      img.alt = p.title ? p.title.replace(/"/g, '') : 'avatar';
      av.appendChild(img);

      const body = document.createElement('div');
      body.className = 'post-body';

      const h = document.createElement('h2');
      h.className = 'post-title';
      h.title = p.title || '';
      h.textContent = p.title || 'Không có tiêu đề';

      const sub = document.createElement('p');
      sub.className = 'post-sub';
      sub.title = p.subtitle || '';
      sub.textContent = p.subtitle || '';

      body.appendChild(h);
      if (sub.textContent) body.appendChild(sub);

      inner.appendChild(av);
      inner.appendChild(body);
      a.appendChild(inner);
      root.appendChild(a);
    }
  }

  renderPager();
  summaryInfo.textContent = `Trang ${currentPage} / ${totalPages} — Tổng ${total} bài`;
  // scroll nhẹ lên top danh sách để UX tốt khi đổi trang
  root.scrollIntoView({behavior:'smooth', block:'start'});
}

function renderPager(){
  const total = posts.length;
  const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
  pagerEl.innerHTML = '';

  // Prev
  const prev = document.createElement('button');
  prev.textContent = 'Prev';
  prev.disabled = currentPage <= 1;
  prev.onclick = () => renderPage(currentPage - 1);
  pagerEl.appendChild(prev);

  // page numbers (windowed)
  const maxButtons = 7;
  let start = Math.max(1, currentPage - Math.floor(maxButtons/2));
  let end = start + maxButtons - 1;
  if(end > totalPages){ end = totalPages; start = Math.max(1, end - maxButtons + 1); }

  if(start > 1){
    pagerEl.appendChild(pageButton(1));
    if(start > 2){
      const dots = document.createElement('span'); dots.textContent = '...'; dots.style.padding = '6px 8px'; pagerEl.appendChild(dots);
    }
  }

  for(let i = start; i <= end; i++){
    pagerEl.appendChild(pageButton(i));
  }

  if(end < totalPages){
    if(end < totalPages - 1){
      const dots = document.createElement('span'); dots.textContent = '...'; dots.style.padding = '6px 8px'; pagerEl.appendChild(dots);
    }
    pagerEl.appendChild(pageButton(totalPages));
  }

  // Next
  const next = document.createElement('button');
  next.textContent = 'Next';
  next.disabled = currentPage >= totalPages;
  next.onclick = () => renderPage(currentPage + 1);
  pagerEl.appendChild(next);
}

function pageButton(i){
  const b = document.createElement('button');
  b.className = 'page-num' + (i === currentPage ? ' active' : '');
  b.textContent = i;
  b.onclick = () => renderPage(i);
  if(i === currentPage) b.setAttribute('aria-current', 'page');
  return b;
}

/* ===== LOAD JSON ===== */
function loadFromJson(path){
  setBusy(true);
  hideMessage();
  showMessage('Đang tải dữ liệu...');
  return fetch(path, {cache: "no-cache"})
    .then(res => {
      if(!res.ok) throw new Error('Không thể tải JSON: ' + res.status);
      return res.json();
    })
    .then(data => {
      if(!Array.isArray(data)) throw new Error('Dữ liệu JSON phải là mảng.');
      posts = data;
      hideMessage();
      setBusy(false);
      renderPage(1);
    })
    .catch(err => {
      console.error(err);
      // fallback demo data
      hideMessage();
      setBusy(false);
      showMessage('Không tải được posts.json — dùng dữ liệu demo tạm thời.');
      useDemoData();
      renderPage(1);
      // ẩn message sau 3s
      setTimeout(()=>{ hideMessage(); }, 3000);
    });
}

/* ===== Demo fallback (nếu không có JSON) ===== */
function useDemoData(){
  posts = [];
  for(let i=1;i<=43;i++){
    posts.push({
      title: `Tiêu đề demo #${i}`,
      subtitle: `Đây là mô tả ngắn cho bài demo số ${i}.`,
      avatar: 'https://via.placeholder.com/300.png?text=Av' + i,
      link: 'https://www.facebook.com/yourpage/posts/' + (1000 + i)
    });
  }
}

loadFromJson(JSON_PATH);
</script>
    <footer>
        <p id="brandName">TDStudio</p>
        <p id="footSub">Thường trả lời sau vài giờ. Vui lòng chọn kênh hỗ trợ
          thuận tiện nhất!</p>
        <small id="footCopy">© <span id="year"></span> TDStudio — All rights
          reserved.</small>
      </footer>
    </main>
  </body>
  
</html>
